<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gage R&R System</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Login Screen -->
    <div id="loginScreen" class="login-container">
        <div class="login-card">
            <div class="login-header">
                <h1>Gage R&R System</h1>
                <p>Quality Control Application</p>
            </div>
            
            <div class="login-buttons">
                <div class="admin-login">
                    <input type="text" id="username" placeholder="Username" class="input-field">
                    <input type="password" id="password" placeholder="Password" class="input-field">
                    <button onclick="handleLogin()" class="btn-primary btn-large">
                        Login
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Main App -->
    <div id="mainApp" class="main-app hidden">
        <!-- Sidebar -->
        <div id="sidebar" class="sidebar">
            <div class="sidebar-content">
                <h2 class="sidebar-title">Menu</h2>
                
                <div class="menu-list">
                    <button onclick="navigateTo('input')" class="menu-item">
                        üìù Input Data
                    </button>
                    
                    <button id="menuAutoList" onclick="navigateTo('autolist')" class="menu-item hidden">
                        üîë Auto List Sample
                    </button>
                    
                    <button onclick="navigateTo('datanilai')" class="menu-item">
                        üìä Data Nilai
                    </button>
                    
                    <button id="menuSettings" onclick="navigateTo('settings')" class="menu-item hidden">
                        ‚öôÔ∏è Pengaturan Tanggal
                    </button>
                    
                    <button onclick="handleLogout()" class="menu-item logout-btn">
                        üö™ Logout
                    </button>
                </div>
            </div>
        </div>

        <!-- Overlay -->
        <div id="overlay" class="overlay" onclick="toggleSidebar()"></div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Header -->
            <div class="header">
                <button onclick="toggleSidebar()" class="menu-toggle">‚ò∞</button>
                <h1 id="headerTitle" class="header-title">Gage R&R</h1>
                <div class="header-spacer"></div>
            </div>

            <!-- Content Area -->
            <div class="content-area">
                
                <!-- Auto List Sample View (Admin Only) -->
                <div id="autoListView" class="view-container hidden">
                    <div class="card">
                        <h2 class="card-title">Auto List Sample - Answer Keys</h2>
                        
                        <div class="form-group">
                            <label class="form-label">Pilih Sub-Department Area</label>
                            <div class="area-selector" id="areaSelector"></div>
                        </div>
                        
                        <div id="answerKeyForm" class="answer-key-form hidden">
                            <h3 class="form-subtitle">Atur Answer Key</h3>
                            <div id="sampleKeyContainer"></div>
                            
                            <div class="button-group">
                                <button onclick="saveAnswerKey()" class="btn-primary">
                                    Simpan Answer Key
                                </button>
                                <button onclick="deleteAnswerKey()" class="btn-danger">
                                    Hapus Answer Key
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Data Nilai View -->
                <div id="dataNilaiView" class="view-container hidden">
                    <div class="card">
                        <h2 class="card-title">Data Nilai Peserta</h2>
                        
                        <!-- Legend (Admin Only) -->
                        <div id="colorLegend" class="color-legend hidden">
                            <div class="legend-item">
                                <span class="legend-color legend-green"></span>
                                <span>Jawaban benar semua</span>
                            </div>
                            <div class="legend-item">
                                <span class="legend-color legend-yellow"></span>
                                <span>Terdapat kesalahan jawaban</span>
                            </div>
                            <div class="legend-item">
                                <span class="legend-color legend-red"></span>
                                <span>Data duplikat (diinput lebih dari 1x)</span>
                            </div>
                            <div class="legend-item">
                                <span class="legend-color legend-black"></span>
                                <span>Answer Key Sample List belum disetting</span>
                            </div>
                        </div>
                        
                        <div id="filterContainer" class="form-group">
                            <label class="form-label">Filter Sub-Department Area</label>
                            <select id="filterSubDept" onchange="filterEmployeeList()" class="input-field">
                                <option value="">Semua Area</option>
                                <option value="Cutting">Cutting</option>
                                <option value="DNS">DNS</option>
                                <option value="Preparation">Preparation</option>
                                <option value="CSC">CSC</option>
                                <option value="Sewing">Sewing</option>
                                <option value="Lasting">Lasting</option>
                                <option value="Assy">Assy</option>
                                <option value="MA">MA</option>
                            </select>
                        </div>
                        
                        <div id="employeeList" class="employee-list"></div>
                        
                        <div id="employeeDetail" class="employee-detail hidden">
                            <button onclick="backToList()" class="btn-link">‚Üê Kembali ke daftar</button>
                            
                            <div id="employeeInfo" class="employee-info"></div>
                            
                            <div class="table-wrapper">
                                <table id="gradeTable" class="grade-table"></table>
                            </div>
                            
                            <p class="table-note">P = Pass, F = Fail</p>
                            <p class="table-note">Angka ganjil = Kiri, Angka genap = Kanan</p>
                            
                            <div class="detail-actions">
                                <button id="downloadBtn" onclick="downloadExcel()" class="btn-success hidden">
                                    üì• Download Excel
                                </button>
                                <button id="deleteDataBtn" onclick="deleteEmployeeData()" class="btn-danger hidden">
                                    üóëÔ∏è Hapus Data
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Settings View -->
                <div id="settingsView" class="view-container hidden">
                    <div class="card">
                        <h3 class="card-title">Pengaturan Periode Gage R&R</h3>
                        
                        <div class="form-group">
                            <label class="form-label">Tanggal Mulai</label>
                            <input type="date" id="dateStart" class="input-field">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Tanggal Selesai</label>
                            <input type="date" id="dateEnd" class="input-field">
                        </div>
                        
                        <button onclick="saveDateSettings()" class="btn-primary btn-large">
                            Simpan Pengaturan
                        </button>
                    </div>
                </div>

                <!-- Input Form -->
                <div id="inputView" class="view-container">
                    <!-- Profile Section -->
                    <div class="card">
                        <h2 class="card-title">Data Peserta</h2>
                        
                        <div class="form-group">
                            <label class="form-label">Penilai</label>
                            <input list="assessorList" id="assessorInput" placeholder="Pilih atau ketik nama penilai" class="input-field">
                            <datalist id="assessorList">
                                <option value="Irma">
                                <option value="Iksan">
                                <option value="Ope">
                            </datalist>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">NIK</label>
                            <input type="text" id="nikInput" onchange="handleNikChange()" placeholder="Masukkan NIK" class="input-field">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Nama</label>
                            <input type="text" id="nameInput" readonly placeholder="Nama akan muncul otomatis" class="input-field input-readonly">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Sub-Department Area</label>
                            <select id="subDeptInput" class="input-field">
                                <option value="">Pilih Sub-Department</option>
                                <option value="Cutting">Cutting</option>
                                <option value="DNS">DNS</option>
                                <option value="Preparation">Preparation</option>
                                <option value="CSC">CSC</option>
                                <option value="Sewing">Sewing</option>
                                <option value="Lasting">Lasting</option>
                                <option value="Assy">Assy</option>
                                <option value="MA">MA</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Line</label>
                            <select id="lineInput" class="input-field">
                                <option value="">Pilih Line</option>
                                <option value="NCVS 101">NCVS 101</option>
                                <option value="NCVS 102">NCVS 102</option>
                                <option value="NCVS 103">NCVS 103</option>
                                <option value="NCVS 104">NCVS 104</option>
                                <option value="NCVS 105">NCVS 105</option>
                                <option value="NCVS 106">NCVS 106</option>
                                <option value="NCVS 107">NCVS 107</option>
                                <option value="NCVS 108">NCVS 108</option>
                                <option value="NCVS 109">NCVS 109</option>
                                <option value="NCVS 110">NCVS 110</option>
                            </select>
                        </div>
                    </div>

                    <!-- Checking Data -->
                    <div class="card">
                        <div class="checking-header-row">
                            <h2 class="card-title">Data Checking</h2>
                            <button id="autoFillBtn" onclick="showAutoFillModal()" class="btn-autofill">
                                üîë Auto List Sample
                            </button>
                        </div>
                        
                        <div class="checking-slider" id="checkingSlider">
                            <!-- Checking 1 -->
                            <div class="checking-page" id="checking-1">
                                <div id="checkingContainer1" class="checking-container"></div>
                            </div>
                            
                            <!-- Checking 2 -->
                            <div class="checking-page" id="checking-2">
                                <div id="checkingContainer2" class="checking-container"></div>
                            </div>
                            
                            <!-- Checking 3 -->
                            <div class="checking-page" id="checking-3">
                                <div id="checkingContainer3" class="checking-container"></div>
                            </div>
                        </div>
                        
                        <div class="checking-navigation">
                            <button onclick="prevChecking()" id="prevBtn" class="nav-btn" disabled>‚Üê Sebelumnya</button>
                            <span id="checkingIndicator" class="checking-indicator">Pemeriksaan 1 dari 3</span>
                            <button onclick="nextChecking()" id="nextBtn" class="nav-btn">Selanjutnya ‚Üí</button>
                        </div>
                    </div>

                    <!-- Save Button -->
                    <button onclick="saveData()" class="btn-save">
                        SIMPAN
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Auto Fill Modal -->
    <div id="autoFillModal" class="modal-overlay hidden">
        <div class="modal-content">
            <h3 class="modal-title">Pilih Area untuk Auto Fill</h3>
            <div id="autoFillAreaSelector" class="area-selector-modal"></div>
            <div class="modal-actions">
                <button onclick="closeAutoFillModal()" class="btn-secondary">Batal</button>
                <button onclick="applyAutoFill()" class="btn-primary">Terapkan</button>
            </div>
        </div>
    </div>

    <script src="datanamanik.js"></script>
    <script src="datalogin.js"></script>
    <script src="script.js"></script>
</body>
</html>
